<!DOCTYPE html>
<html>
	<head>
		<!--Import Google Icon Font-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="css/nouislider.min.css">
		<link rel="stylesheet" href="css/materialize.css">
		<link rel="stylesheet" href="css/default.css">
		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
		body {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
  }
  


  main {
    flex: 1 0 auto;
  }

			
			.modal.bottom-sheet {
				max-height: 67vh;
			}

      .tabs .tab {
        min-width: initial;
      }
      
      .side-nav .collapsible-body li a, .side-nav.fixed .collapsible-body li a {
        padding: initial;
      }
			
			.collapsible {
				box-shadow:none;
			}
			
			.collapsible, .collapsible-body, .collapsible-header {
				border: none;
			}

			
			
		header, main, footer {
      margin-left: 300px;
    }
  
 
    @media only screen and (max-width : 992px) {
      header, main, footer {
        padding-left: 0;
      }
    }
	
	.side-nav li {
		line-height: initial;
	}
  

	.side-nav .collapsible-header,.side-nav.fixed .collapsible-header {
		padding: 0;
	}
	
	.side-nav .collapsible-body {
		padding: 16px 32px;
	}
	
	.side-nav.fixed .collapsible-body {
		padding: 16px;
	}
		</style>
  <head>
	<body class="">
    <!-- display -->
    <header>
      <nav>
        <div class="nav-wrapper container">
          <a href="#!" class="brand-logo">Name in Synonym</a>
          <ul class="right hide-on-med-and-down">
            <li><a href="#lookup" class="modal-trigger"><i class="material-icons">search</i></a></li>
            <li><a href="#!" onclick="window.print()"><i class="material-icons">print</i></a></li>
          </ul>
        </div>
      </nav>
    </header>
    <!-- load -->
    
    <!-- config -->
    <ul id="slide-out" class="side-nav fixed">
      <li class='logo'>
        <a id="logo-container" href="#!" class="brand-logo" style='height:64px'>
          <img class="responsive-img" src="img/silcHeader.png" style="max-height:100%">
        </a>
      </li>
      <li>
        <ul class="collapsible">
          <li>
            <div class="collapsible-header active">
              <a href="#!">Basic Options</a>
            </div>
            <!-- __solution -->	
            <div class="collapsible-body">			
              <div class="input-field">
                <input placeholder="Chrysanthimum" id="" type="text" class="validate config__solution">
                <label for="first_name">Puzzle Solution</label>
              </div>
              <!-- __language -->
              <select name="language" class="config__language browser-default">
                <option value="" disabled selected>Choose your option</option>
                <option value="english">English</option>
                <option value="telugu">Telugu</option>
                <option value="spanish">Spanish</option>
              </select>									
        
            </div>	
          </li>
          <!-- __image -->
          <li>
            <div class="collapsible-header">
              <a href="#!">Image Options</a>
            </div>						
            <div class="collapsible-body">
              <input name="config__image" type="radio" id="config__image_radio--none" checked value="0"/>
              <label for="config__image_radio--none">None</label>						
              <br>

              <input name="config__image" type="radio" id="config__image_radio--url" value="1"/>
              <label for="config__image_radio--url">Url</label>

              <div class="input-field">
                <input placeholder="" type="url" class="validate" disabled>
              </div>
              <input name="config__image" type="radio" id="config__image_radio--upload" value="2"/>
              <label for="config__image_radio--upload">Upload</label>

              <div class="file-field input-field">
                <div class="btn" style="float:none" disabled>
                  <span>File</span>
                  <input type="file">
                </div>
                <div class="file-path-wrapper hide">
                  <input class="file-path validate" type="text" >
                </div>
              </div>
              <div class="config__image_img hide">
                <img class="responsive-img" src="cool_pic.jpg">			
              </div>
            </div>
          </li>
          <!-- __format -->
          <li>
            <div class="collapsible-header">
              <a href="#!">Format Options</a>
            </div>						
            <div class="collapsible-body">		
              
              <div>
                <h6 class="grey-text">Align Characters</h6>
              </div>
              <div>
                <input name="puzzle-format" type="radio" id="config__format_radio--align" />
                <label for="config__format_radio--align">Align</label>
                <br>
                <input name="puzzle-format" type="radio" id="config__format_radio--justify" checked />
                <label for="config__format_radio--justify">Justify</label>
              </div>
              <!-- __difficulty -->

              <div>
                <h6 class="grey-text">Number of characters</h6>
              </div>
              <div class="input-field ">
                <p class="range-field">
                  <div id="config__number_of_characters"></div>
                </p>
              </div>
              
              <div>
                <h6 class="grey-text">Column preference</h6>
              </div>
 
              <div class="switch config__toggle_column">
                <label>
                  random
                  <input type="checkbox">
                  <span class="lever"></span>
                  choose
                </label>
              </div>
              <div class="input-field ">
                <p class="range-field">
                  <div id="config__column_preference"></div>
                </p>
              </div>

                  
            </div>
          </li>
          <li>
            <div class="collapsible-header">
              <a href="#!">Choose Solutions</a>
            </div>						
            <div class="collapsible-body config__tabs">
              <ul class="tabs">
              </ul>
            </div>
          </li>
          <li>
            <a href="#!" class="btn white-text" style="">Update</a>
          </li>
        </ul>
      </li>
    </ul>
    
    <!-- Done -->			
    <main class="indigo lighten-5">
      <div class="display">
        <div class="display__solution">
        </div>
        <div class="display__language">
        </div>
        <div class="display__image">
        </div>
      </div>
    </main>   
    
    <div id="lookup" class="modal bottom-sheet">
			<div class="modal-content container">
				<ul class="collection with-header">
					<li class="collection-header"><h6 class="blue-grey-text text-lighten-2">17 matches</h6></li>
					<li class="collection-item"><div>Alvin<a href="#!" class="secondary-content"><i class="material-icons">new</i></a></div></li>
				</ul>
			</div>
			<div class="modal-footer"></div>
		</div>
    
    <footer></footer>
    <script src="http://d3js.org/d3.v4.min.js"></script>
		<!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="js/nouislider.min.js"></script>
    <script type="text/javascript" src="js/wNumb.js"></script>
		<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
		<!-- Compiled and minified JavaScript -->
		<script src="js/materialize.min.js"></script>
		<script src="js/http.js"></script>

		<script>
      var dispatch = d3.dispatch("load","config__image_load","config__solution","config__language","config__image","config__toggle_column");
      
      var puzzle = {
        "solution":"",
        "language":"",
        "image":""
      };
      
      var pair = {
        "column":"",
        "clue":"",
        "synonym":""
      }
      
      var pairs = [];

    	dispatch.on("load.config", function(puzzle) {
        d3.select('#config__column_preference')
          .style('opacity', '.5')
          .attr('disabled', 'disabled');
        d3.select(".config__solution")
          .on("input", function() { dispatch.call("config__solution", this, this.value); });
        d3.select(".config__language")
          .on("change", function() { dispatch.call("config__language", this, this.value); });
        d3.selectAll('.config__toggle_column input')
          .on("change", function() { dispatch.call("config__toggle_column", this, this.value); });
        d3.selectAll('input[name="config__image"]')
          .on("change", function() { dispatch.call("config__image", this, this.value); });
        d3.select('#config__image_radio--url ~ .input-field input')
          .on("change", function() { dispatch.call("config__image_load", this, this.value); });
        d3.select('#config__image_radio--upload ~ .input-field input')
          .on("change", function() { dispatch.call("config__image_load", this, window.URL.createObjectURL($('#config__image_radio--upload ~ .input-field input').get(0).files[0]));});
      });
      
      dispatch.on("config__solution", function() {
        var state = d3.select(".config__solution").property("value");
        d3.select(".display__solution")
          .text(state);
        d3.selectAll(".config__tabs .tabs .tab").remove();
        d3.selectAll(".config__tabs div").remove();
        state.split("").forEach( function(c,i) { 
          console.log(c);
          var li = d3.select(".config__tabs .tabs")
            .append("li")
              .attr("class","tab");
          li.append("a")
            .attr("href","#tab-"+i)
            .text(c);
          var tab = d3.selectAll(".config__tabs")
            .append("div")
              .attr("id","tab-"+i)
              .attr("style","display: none;")
          tab.append("select")
            .attr("class","browser-default");
          tab.append("select")
            .attr("class","browser-default");
        });        
        
        $('.config__tabs .tabs').tabs();
        $('select').material_select();
      });      
      
      dispatch.on("config__language", function(state) {
        d3.select(".display__language")
          .text(state);
      });
      
      dispatch.on("config__toggle_column", function(state) {
        e = d3.select('#config__column_preference');
        if ( this.checked ) {
          e.attr('disabled', null)
            .style('opacity', '1');
        } else {
          e.attr('disabled', 'disabled')
            .style('opacity', '.5');
        }
      });
      dispatch.on("config__image_load", function(state) {
        d3.select('.display__image img')
          .remove();
        d3.select('.display__image') 
          .append("img")
          .attr("src",state);
      });
      
      dispatch.on("config__image", function(state) {    
        d3.select('.display__image img')
          .remove()      
        switch (state) {
          case '0':
            d3.select('#config__image_radio--upload ~ .input-field .btn')
              .attr('disabled', 'disabled')
              .attr('required', null);
            d3.select('#config__image_radio--url ~ .input-field input')
              .attr('disabled', 'disabled')
              .attr('required', null);
            break;
          case '1':
            d3.select('#config__image_radio--upload ~ .input-field .btn')
              .attr('disabled', 'disabled')
              .attr('required', null);
            d3.select('#config__image_radio--url ~ .input-field input')
              .attr('disabled', null)
              .attr('required', 'required');
            dispatch.call("config__image_load", this, d3.select('#config__image_radio--url ~ .input-field input').property("value"));
            break;
          case '2':
            d3.select('#config__image_radio--upload ~ .input-field .btn')
              .attr('disabled', null)
              .attr('required', 'required');
            d3.select('#config__image_radio--url ~ .input-field input')
              .attr('disabled', 'disabled')
              .attr('required', null);
            dispatch.call("config__image_load", this, window.URL.createObjectURL($('#config__image_radio--upload ~ .input-field input').get(0).files[0]));
            break;
        }
      });
      
			$( document ).ready(function() {
				$('.modal-trigger').leanModal();
				$('.collapsible').collapsible();
        dispatch.call("load", this, puzzle);
			});

      var slider_number_of_characters = document.getElementById('config__number_of_characters');
      var slider_column_preference = document.getElementById('config__column_preference');
      
      noUiSlider.create(slider_number_of_characters, {
        start: [3, 12],
        connect: true,
        margin: 1,
        step: 1,
        tooltips:true,
        format: wNumb({
          decimals: 0
        }),
        range: {
          'min': 3,
          'max': 12
        }
      });	

      noUiSlider.create(slider_column_preference, {
        start: 5,
        tooltips:true,
        step: 1,
        format: wNumb({
          decimals: 0
        }),
        range: {
          'min': 3,
          'max': 12
        }
      });
    
      slider_number_of_characters.noUiSlider.on('update', function(values,handle) {
        slider_column_preference.noUiSlider.updateOptions({
          range: {
            'min': parseInt(values[0]),
            'max': parseInt(values[1])
          }
        });
        dispatch.call("config__solution", this, this.value);
      });
		</script>
	</body>
</html>
        